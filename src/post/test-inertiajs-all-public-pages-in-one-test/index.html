<!DOCTYPE html>
<html lang="en">

  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="color-scheme" content="light dark">
    <meta name="author" content="Shahryar Tayeb">
    <meta name="description" content="test-inertiajs-all-public-pages-in-one-test">
    <link rel="alternate" href="/atom.xml" type="application/atom+xml">
    <title>Test All Inertia-js and Laravel App Public Pages in One Test File | SHTB Blog</title>


    <meta name="description" content="test-inertiajs-all-public-pages-in-one-test" />

    <!-- Open Graph / Facebook -->
    <meta property="og:type" content="website" />
    <meta name="og:description" content="test-inertiajs-all-public-pages-in-one-test" />

    <meta property="og:image" content="https://blog.shahryartayeb.com/assets/images/shtb3.webp" />
    
    <!-- Twitter -->
    <meta property="twitter:card" content="summary_large_image" />
    <meta name="twitter:description" content="test-inertiajs-all-public-pages-in-one-test" />
    <meta property="twitter:image" content="https://blog.shahryartayeb.com/assets/images/shtb3.webp" />



    <!-- Google Tag Manager -->
        <script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
        new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
        j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
        'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
        })(window,document,'script','dataLayer','GTM-M2FDCZ73');</script>
    <!-- End Google Tag Manager -->


    <link rel="stylesheet" type="text/css" href="../../styles/style.css" />

    <!-- Icons-->
    <link rel="apple-touch-icon" sizes="180x180" href="../../img/logo_dark.svg" />
    <link
      rel="icon"
      type="image/png"
      sizes="32x32"
      href="../img/logo_dark.svg"
    />
    <link
      rel="icon"
      type="image/png"
      sizes="16x16"
      href="../img/logo_dark.svg"
    />

    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/styles/dark.min.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/highlight.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/languages/js.min.js"></script>
    <script>hljs.highlightAll();</script>
  </head>

  <body>

    <!-- Google Tag Manager (noscript) -->
        <noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-M2FDCZ73"
        height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
        <!-- End Google Tag Manager (noscript) -->
    

    <main>
    

 <section>
  
    <h1>Test All Inertia-js and Laravel App Public Pages in One Test File</h1>
  

  <aside>
    <p>published on 2023-06-11
    
    · tagged with
      
          <a href="/tags/backend.html">#backend</a>
      
      </p>
    </aside>
  </section>

  <h2>Introduction</h2>
<p>Testing is an essential part of software development, and Laravel provides two testing frameworks out of the box: PhpUnit and Pest. Both frameworks are used to write and run automated tests in Laravel applications.</p>
<h1></h1>
<p>In this article we will compare testing the public pages of an Inertia Js, Vue and Laravel app with PhpUnit and Pest testing frameworks.</p>
<h1></h1>
<p>I have assumed that you have already setup Pest and Phpunit(it is easy to setup while installing laravel) and will not go over them.</p>
<h1></h1>
<h2>PhpUnit Test</h2>
<p>Let&rsquo;s create the test called <code>tests/Feature/StabilityTest.php</code></p>
<div class="mockup-code">


<div class="codehilite"><pre><span></span><code>php<span class="w"> </span>artisan<span class="w"> </span>make:test<span class="w"> </span>StabilityTest
</code></pre></div>



</div>

<h3><code>StabilityTest.php</code></h3>
<div class="codehilite"><pre><span></span><code><span class="cp">&lt;?php</span>

<span class="k">namespace</span> <span class="nx">Tests\Feature</span><span class="p">;</span>

<span class="k">use</span> <span class="nx">Illuminate\Foundation\Testing\RefreshDatabase</span><span class="p">;</span>
<span class="k">use</span> <span class="nx">Illuminate\Foundation\Testing\WithFaker</span><span class="p">;</span>
<span class="k">use</span> <span class="nx">Tests\TestCase</span><span class="p">;</span>
<span class="k">use</span> <span class="nx">Inertia\Testing\AssertableInertia</span> <span class="k">as</span> <span class="nx">Assert</span><span class="p">;</span>

<span class="k">class</span> <span class="nc">StabilityTest</span> <span class="k">extends</span> <span class="nx">TestCase</span>
<span class="p">{</span>
    <span class="sd">/**</span>
<span class="sd">     * A basic feature test example.</span>
<span class="sd">     *</span>
<span class="sd">     * @return void</span>
<span class="sd">     */</span>
    <span class="k">public</span> <span class="k">function</span> <span class="nf">test_all_public_routes_are_accessible</span><span class="p">()</span><span class="o">:</span> <span class="nx">void</span>
    <span class="p">{</span>
        <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">get</span><span class="p">(</span><span class="s1">&#39;/&#39;</span><span class="p">)</span>
                        <span class="o">-&gt;</span><span class="na">assertOk</span><span class="p">()</span>
                        <span class="o">-&gt;</span><span class="na">assertInertia</span><span class="p">(</span><span class="nx">fn</span><span class="p">(</span><span class="nx">Assert</span> <span class="nv">$page</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="nv">$page</span><span class="o">-&gt;</span><span class="na">component</span><span class="p">(</span><span class="s1">&#39;Home&#39;</span><span class="p">));</span>


                <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">get</span><span class="p">(</span><span class="s1">&#39;/login&#39;</span><span class="p">)</span>
                        <span class="o">-&gt;</span><span class="na">assertOk</span><span class="p">()</span>
                        <span class="o">-&gt;</span><span class="na">assertInertia</span><span class="p">(</span><span class="nx">fn</span><span class="p">(</span><span class="nx">Assert</span> <span class="nv">$page</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="nv">$page</span><span class="o">-&gt;</span><span class="na">component</span><span class="p">(</span><span class="s1">&#39;Auth/Login&#39;</span><span class="p">));</span>

    <span class="p">}</span>
<span class="p">}</span>
</code></pre></div>

<h1></h1>
<p>The test method <code>test_all_public_routes_are_accessible</code> tests two public routes: <code>/</code> and <code>/login</code>. </p>
<h1></h1>
<p>The <code>get</code> method simulates a GET request to the given route. The <code>assertOk</code> method checks if the response status code is 200, indicating that the request was successful. </p>
<h1></h1>
<p>The <code>assertInertia</code> method checks if the response contains the specified Inertia component. Overall, this test ensures that the public routes are accessible and return the expected Inertia components.</p>
<h1></h1>
<h3>The problem</h3>
<p>In the above example we have only tested two route but realisticly apps have alot more routes than that. If we added ten more routes, we have to copy the <code>$this-&gt;get()</code> request 10 times and in the future if changes our test then we need to change it in all the places.</p>
<h1></h1>
<p>Let&rsquo;s fix this problem with PEST.</p>
<h1></h1>
<h2>PEST Test</h2>
<p>Pest is a newer testing framework that provides a more fluent and expressive syntax for writing tests. 
If you have used JS test frameworks before then you will feel familiar with PEST write away.</p>
<h1></h1>
<blockquote>
<p>How does Pest differ from PHPUnit?</p>
<h1></h1>
<p>Pest is built on top of PHPUnit, but it spices things up with some neat features you might dig. With Pest, you have access to a user-friendly API that is inspired by Ruby&rsquo;s Rspec and Jest libraries, making it easy to write elegant tests quickly. Additionally, Pest&rsquo;s console output is truly stunning and makes it effortless to spot any issues that arise. But the benefits don&rsquo;t end there - Pest also includes features such as built-in parallel testing, coverage, watch mode, architecture testing, native profiling tools, snapshot testing, and the most beautiful documentation in the world.</p>
<h1></h1>
<p><a href="https://pestphp.com/">From Pest website</a></p>
</blockquote>
<h1></h1>
<h3><code>StabilityTestPest.php</code></h3>
<h1></h1>
<p>Let&rsquo;s create the test called <code>tests/Feature/StabilityTestPest.php</code></p>
<h1></h1>
<div class="codehilite"><pre><span></span><code><span class="x">// StabilityTestPest.php</span>

<span class="x">use Inertia\Testing\AssertableInertia as Assert;</span>

<span class="x">it(&#39;renders public pages&#39;, function (string $path, string $component) {</span>

<span class="x">    $this-&gt;get($path)</span>
<span class="x">        -&gt;assertOk()</span>
<span class="x">        -&gt;assertInertia(fn(Assert $page) =&gt; $page-&gt;component($component));</span>

<span class="x">})-&gt;with([</span>
<span class="x">    [</span>
<span class="x">        &#39;path&#39; =&gt; &#39;/&#39;,</span>
<span class="x">        &#39;component&#39; =&gt; &#39;Home&#39;,</span>
<span class="x">    ],</span>
<span class="x">    [</span>
<span class="x">        &#39;path&#39; =&gt; &#39;/login&#39;,</span>
<span class="x">        &#39;component&#39; =&gt; &#39;Auth/Login&#39;,</span>
<span class="x">    ],</span>
<span class="x">]);</span>
</code></pre></div>

<h1></h1>
<p>In the Pest test, if we wanted to add new routes to our test, we can just add it to array and that is all.</p>
<h1></h1>
<h2>Conclusion</h2>
<p>In conclusion, both PhpUnit and Pest are excellent testing frameworks. While PhpUnit is more established and widely used, Pest provides a more expressive syntax for writing tests. As a developer, at the end it which one you choose will depend on your needs and preferences.</p>


    </main>

    <br/>
    <br/>


    <footer>
      <a class="kopimi" href="#" title="Kopimi">
        <img class="kopimi" src="../../img/logo_dark.svg" title="SHTB Logo" />
      </a>
    </footer>

    <script
      type="module"
      src="../../js/main.fucking.js"
      type="text/javascript"
    ></script>
  </body>

</html>